<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	th:replace="~{/index.html::home(~{::body})}">
<head>
<meta charset="UTF-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>Pet Shop</title>
</head>

<body>
	<div class="container-lg main-content px-3">
		<div class="d-flex align-items-center justify-content-center mt-5">
			<div
				class="w-75 gap-2 d-flex justify-content-start align-items-center">
				<h3 class="fw-bold font-resp text-danger">
					<i class="fa-regular fa-user"></i> Đường dẫn kích hoạt này hiện không khả dụng
				</h3>
			</div>
			<div class="line w-25"></div>
		</div>
		<!-- Modal -->
		<div class="modal fade" data-bs-backdrop="static" id="countdownModal"
			tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="modalLabel">Thông báo</h5>
					</div>
					<div class="modal-body">
						<p id="modal-message"></p>
						<div class="progress" role="progressbar" aria-valuemin="0"
							aria-valuemax="100">
							<div id="progressBar"
								class="progress-bar bg-danger progress-bar-striped progress-bar-animated"
								style="width: 0"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script>
	 const provincesApi = 'https://api.allorigins.win/get?url=https://vapi.vnappmob.com/api/province';
        const districtsApi = (provinceCode) => `https://api.allorigins.win/get?url=https://vapi.vnappmob.com/api/province/district/${provinceCode}`;
        const wardsApi = (districtCode) => `https://api.allorigins.win/get?url=https://vapi.vnappmob.com/api/province/ward/${districtCode}`;

        const provinceSelect = document.getElementById('provinceSelect');
        const districtSelect = document.getElementById('districtSelect');
        const wardSelect = document.getElementById('wardSelect');

        fetch(provincesApi)
        .then(response => response.json())
        .then(data => {
          const provinces = JSON.parse(data.contents);
          console.log("Parsed provinces data:", provinces);

          // Assume provinces is an object with properties containing arrays
          if (provinces && provinces.results) {
            provinces.results.forEach(province => {
              const option = document.createElement('option');
              option.value = province.province_id;
              option.text = province.province_name;
              provinceSelect.add(option);
              console.log(provinceSelect);
            });
          } else {
            console.error('Error: Expected an array but got', typeof provinces);
          }
        })
        .catch(error => console.error('Error:', error));


        // Khi chọn tỉnh, lấy danh sách quận huyện
        provinceSelect.addEventListener('change', function() {
            const provinceCode = this.value;
            districtSelect.innerHTML = '<option selected disabled>Chọn quận/huyện</option>'; // Reset danh sách quận
            wardSelect.innerHTML = '<option selected disabled>Chọn phường/xã</option>'; // Reset danh sách phường

            fetch(districtsApi(provinceCode))
                .then(response => response.json())
                .then(data => {
                    const districts = JSON.parse(data.contents);
                    districts.results.forEach(district => {
                        const option = document.createElement('option');
                        option.value = district.district_id;
                        option.text = district.district_name;
                        districtSelect.add(option);
                    });
                })
                .catch(error => console.error('Error:', error));
        });

        // Khi chọn quận, lấy danh sách phường xã
        districtSelect.addEventListener('change', function() {
            const districtCode = this.value;
            wardSelect.innerHTML = '<option selected disabled>Chọn phường/xã</option>'; // Reset danh sách phường

            fetch(wardsApi(districtCode))
                .then(response => response.json())
                .then(data => {
                    const wards = JSON.parse(data.contents);
                    wards.results.forEach(ward => {
                        const option = document.createElement('option');
                        option.value = ward.ward_id;
                        option.text = ward.ward_name;
                        wardSelect.add(option);
                    });
                })
                .catch(error => console.error('Error:', error));
        });
    </script>
</body>
</html>